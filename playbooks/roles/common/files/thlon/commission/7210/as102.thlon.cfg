
exit all
configure
#--------------------------------------------------
echo "System Configuration"
#--------------------------------------------------
    system
        name "as102.thlon"
        contact "SNS Network Operations: incident.sns@bskyb.com / 44 (0)20 7032 8006"
        location "TFM5, Telehouse North Telehouse Europe 14 Coriander Avenue E14 2AA London United Kingdom"
        alarm-contact-input 1
            shutdown
        exit
        alarm-contact-input 2
            shutdown
        exit
        alarm-contact-input 3
            shutdown
        exit
        resource-profile
            ingress-internal-tcam
                qos-sap-ingress-resource 6
                exit
                acl-sap-ingress 2
                exit
            exit
            egress-internal-tcam
            exit
            qos
            exit
            router
            exit
        exit
        app-fabric-policy 1 create
        exit
        ptp
            shutdown
        exit
        snmp
	    no shutdown
        exit
        time
            ntp
                server 84.38.45.194 prefer
                server 84.38.45.195
                server 84.38.45.196
                server 84.38.47.197
                server 84.38.47.198
                no shutdown
            exit
            sntp
                shutdown
            exit
            dst-zone BST
                start last sunday march 01:00
                end last sunday october 01:00
            exit
            zone GMT
        exit
        thresholds
            rmon
                alarm 65530 variable-oid ifHCOutOctets.36274176 interval 3 delta rising-event 65530 rising-threshold 70300000 falling-event 65531 falling-threshold 70000000
                alarm 65533 variable-oid ifHCOutOctets.36110336 interval 3 delta rising-event 65534 rising-threshold 70300000 falling-event 65535 falling-threshold 70000000
            exit
        exit
    exit
#--------------------------------------------------
echo "System Security Configuration"
#--------------------------------------------------
    system
        security
            management-access-filter
                ip-filter
                    shutdown
                    default-action deny
                    entry 1
                        description "Brick Lane NME (NMLON)"
                        src-ip 84.38.45.0/24
                        action permit
                    exit
                    entry 2
                        description "Edinburgh NME (NMEDI)"
                        src-ip 84.38.47.0/24
                        action permit
                    exit
                    entry 3
                        description "SNS NME TACPLUS 1"
                        src-ip 84.38.41.73/32
                        action permit
                    exit
                    entry 4
                        description "SNS NME TACPLUS 2"
                        src-ip 84.38.41.201/32
                        action permit
                    exit
                    entry 5
                        description "ICMP from BB-PE"
                        src-ip 89.200.128.176/32
                        action permit
                    exit
                    entry 6
                        description "Local management subnet"
                        src-ip 90.223.190.216/29
                        action permit
                    exit
                    entry 23
                        description "NEW NME"
                        src-ip 90.207.236.0/23
                        action permit
                    exit
                    entry 24
                        description "NEW NME2"
                        src-ip 90.223.208.0/23
                        action permit
                    exit
                    entry 25
                        description "NEW NME2"
                        src-ip 90.223.196.0/24
                        action permit
                    exit
                    entry 26
                        description "NEW NME2"
                        src-ip 90.207.238.0/24
                        action permit
                    exit
                    no shutdown
                exit
            exit
            password
                authentication-order tacplus local  exit-on-reject
                admin-password r3p3nt
            exit
            tacplus
                accounting
                authorization
                server 1 address 84.38.41.73 secret "opVUFFdkJ97DfqUC"
                server 2 address 84.38.41.201 secret "opVUFFdkJ97DfqUC"
            exit
            no user "admin"
            user "networks"
                password "r3p3nt"
                access console
                console
                    no member "default"
                    member "administrative"
                exit
            exit
            snmp
                community "fKnYEOnFCmkEoW6aPxGTQU" hash2 r version both
            exit
            ssh
                preserve-key
            exit
        exit
    exit
#--------------------------------------------------
echo "System Login Control Configuration"
#--------------------------------------------------
    system
        login-control
            pre-login-message "==============================================================================\n\rThis system and data is the property of British Sky Broadcasting Ltd.\n\r\n\r** STRICTLY AUTHORISED USERS ONLY **\n\r\n\rIf you have any problems or queries contact SNS Network Operations at:\n\r\n\rE: incident.sns@bskyb.com\n\rP: +44 (0)20 7032 8006\n\r\n\rIf you are not an Authorised User - DISCONNECT IMMEDIATELY!\n\r\n\rUnauthorised access is an offence under the Computer Misuse Act 1990\n\r==============================================================================\n\r\n\r"
        exit
    exit
#--------------------------------------------------
echo "Log Configuration"
#--------------------------------------------------
    log
        filter 1
            default-action forward
            entry 50
                action drop
                description "Drop AAA:UNUSUAL_ERROR"
                match
                    application eq "logger"
                    number eq 2002
                    subject eq "AAA" regexp
                exit
            exit
        exit
        syslog 1
            description "syslog1.nme.bllon"
            address 84.38.45.214
        exit
        syslog 2
            description "syslog1.nme.enedi"
            address 84.38.47.214
        exit
        snmp-trap-group 1
            trap-target "45.209" address 84.38.45.209 snmpv2c notify-community "r84MgWk7"
            trap-target "47.209" address 84.38.47.209 snmpv2c notify-community "r84MgWk7"
        exit
        log-id 1
            description "snmp-to-oss"
            filter 1
            time-format local
            from main security change
            to snmp
        exit
        log-id 11
            description "syslog-to-syslog1.nme.bllon"
            time-format local
            from main security change
            to syslog 1
        exit
        log-id 12
            description "syslog-to-syslog1.nme.enedi"
            time-format local
            from main security change
            to syslog 2
        exit
        log-id 50
            shutdown
            from debug-trace
            to console
        exit
        log-id 51
            from debug-trace
            to memory
        exit
        log-id 88
            description "Security Log"
            from security
            to memory
        exit
    exit
#--------------------------------------------------
echo "QoS Policy Configuration"
#--------------------------------------------------
    qos
#--------------------------------------------------
echo "Frame Based Accounting Configuration"
#--------------------------------------------------
    exit
#--------------------------------------------------
echo "System Multipoint Management Configuration"
#--------------------------------------------------
    system
        multipoint-management
        exit
    exit
#--------------------------------------------------
echo "Card Configuration"
#--------------------------------------------------
    card 1
        mda 1
            no shutdown
        exit
        no shutdown
    exit
#--------------------------------------------------
echo "System loopback-port Configuration"
#--------------------------------------------------
    system
    exit
#--------------------------------------------------
echo "QoS Policy Configuration"
#--------------------------------------------------
    qos
    exit
#--------------------------------------------------
echo "Port Configuration"
#--------------------------------------------------
    port 1/1/25
        description "[core,rd=ar14-cdn.thlon:4-1-39,cid=LOCAL,iv-s=cdn] - LAG_1 to ar14-cdn.thlon"
        ethernet
            mode hybrid
            access
            exit
            encap-type dot1q
            hold-time up 5
        exit
        no shutdown
    exit
    port 1/1/26
        description "[core,rd=ar14-cdn.thlon:4-1-40,cid=LOCAL,iv-s=cdn] - LAG_1 to ar14-cdn.thlon"
        ethernet
            mode hybrid
            access
            exit
            encap-type dot1q
            hold-time up 5
        exit
        no shutdown
    exit
    port 1/1/24
        description "In-Band Management Port"
        ethernet
            mode access
            access
            exit
            speed 100
        exit
        no shutdown
    exit
#--------------------------------------------------
echo "System Sync-If-Timing Configuration"
#--------------------------------------------------
    system
        sync-if-timing
            begin
            ref1
                shutdown
            exit
            ref2
                shutdown
            exit
            ptp
                shutdown
            exit
            commit
        exit
    exit
#--------------------------------------------------
echo "LAG Configuration"
#--------------------------------------------------
    lag 1
        description "[core,rd=ar14-cdn.thlon:lag4,cid=LOCAL,iv-s=cdn]"
        mode hybrid
        encap-type dot1q
        port 1/1/25
        port 1/1/26
        lacp active
        port-threshold 2 action down
        no shutdown
    exit
#--------------------------------------------------
echo "Router (Network Side) Configuration"
#--------------------------------------------------
    router
        interface "system"
            no shutdown
        exit
#--------------------------------------------------
echo "Web Portal Protocol Configuration"
#--------------------------------------------------
    exit

#--------------------------------------------------
echo "Service Configuration"
#--------------------------------------------------
    service
        customer 1 create
            description "Default customer"
        exit
        epipe 99 customer 1 svc-sap-type any create
            description "Management LAG to ar14-cdn.thlon"
            no service-mtu-check
            sap 1/1/24 create
            exit
            sap lag-1:255 create
            exit
            no shutdown
        exit
    exit
#--------------------------------------------------
echo "Router (Service Side) Configuration"
#--------------------------------------------------
    router
    exit

#--------------------------------------------------
echo "System Time NTP Configuration"
#--------------------------------------------------
    system
        time
            ntp
            exit
        exit
    exit
#--------------------------------------------------
echo "OAM Tests Configuration"
#--------------------------------------------------
    test-oam
        twamp
            server
                shutdown
            exit
        exit
    exit

exit all
